<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FunBox AI ‚Äî Anonymous Messages</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0f1724;
      --card:#1e293b;
      --accent:#7c3aed;
      --accent2:#06b6d4;
      --accent3:#f43f5e;
      --accent4:#fbbf24;
      --muted:#9aa4b2;
      --glass: rgba(255, 255, 255, 0.03);
      --shadow: rgba(0, 0, 0, 0.3);
    }
    *{box-sizing:border-box;}
    html,body{height:100%;margin:0;font-family:'Inter',sans-serif;color:#e6eef8;background:linear-gradient(180deg,#071021 0%,#07182b 100%);}
    .wrap{max-width:960px;margin:40px auto;padding:24px;}

    header{display:flex;align-items:center;gap:20px;margin-bottom:24px;}
    .logo{width:72px;height:72px;border-radius:16px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:26px;box-shadow:0 8px 30px var(--shadow);}
    h1{margin:0;font-size:28px;}
    p.lead{margin:0;color:var(--muted);font-size:14px;}

    .layout{display:grid;grid-template-columns:1fr 360px;gap:20px;}
    .card{background:var(--card);padding:20px;border-radius:16px;box-shadow:0 8px 40px var(--shadow);transition:all 0.2s ease;}
    .card:hover{box-shadow:0 12px 50px var(--shadow);}
    .compose textarea{width:100%;min-height:140px;background:var(--glass);border:1px solid rgba(255,255,255,0.05);color:inherit;padding:14px;border-radius:12px;resize:vertical;font-size:14px;}
    .compose .row{display:flex;gap:10px;align-items:center;margin-top:14px;}
    .compose input[type=text]{flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:inherit;font-size:14px;}
    .btn{padding:12px 16px;border-radius:14px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;cursor:pointer;font-weight:600;transition:all 0.2s ease;}
    .btn:hover{transform:translateY(-2px);box-shadow:0 6px 18px var(--shadow);}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.1);}

    .messages{max-height:60vh;overflow:auto;margin-top:14px;padding-right:6px;}
    .msg{display:flex;gap:14px;padding:14px;border-radius:14px;margin-bottom:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);transition:all 0.2s ease;}
    .msg:hover{background:linear-gradient(135deg, var(--accent3), var(--accent4));}
    .avatar{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#334155,#0ea5a4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:16px;}
    .meta{flex:1;}
    .meta .who{font-weight:700;font-size:15px;}
    .meta .time{font-size:12px;color:var(--muted);}
    .meta .text{margin-top:6px;white-space:pre-wrap;font-size:14px;}
    .msg .actions{display:flex;flex-direction:column;gap:8px;align-items:flex-end;}
    .badge{background:var(--accent);color:white;padding:6px 10px;border-radius:999px;font-size:12px;}
    .sidebar .stat{display:flex;align-items:center;justify-content:space-between;padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent);margin-bottom:12px;}
    .small{font-size:13px;color:var(--muted);}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center;}
    @media (max-width:880px){.layout{grid-template-columns:1fr;}.sidebar{order:2;}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">FB</div>
      <div>
        <h1>FunBox AI</h1>
        <p class="lead">Send or read anonymous messages ‚Äî now with AI-powered replies!</p>
      </div>
    </header>

    <div class="layout">
      <main>
        <div class="card compose">
          <label for="msg">Write your message (max 500 chars)</label>
          <textarea id="msg" maxlength="500" placeholder="Type something fun, kind, or mysterious..."></textarea>
          <div class="row">
            <input id="sender" type="text" placeholder="Your display (optional, default: Anonymous)">
            <button id="send" class="btn">Send Anonymously</button>
            <button id="aiReply" class="btn ghost">Generate AI Reply</button>
            <button id="clearAll" class="btn ghost">Clear All (local)</button>
          </div>
          <div style="margin-top:12px;color:var(--muted);font-size:13px">Messages are stored locally. AI replies are generated instantly in your browser.</div>
        </div>

        <div id="messagesContainer" class="card messages" aria-live="polite"></div>
      </main>

      <aside class="sidebar">
        <div class="card">
          <div class="stat"><div><strong id="totalCount">0</strong><div class="small">Total messages</div></div><div class="badge" id="unreadCount">0</div></div>
          <div class="stat"><div><strong id="lastSent">‚Äî</strong><div class="small">Last sent</div></div><div><button id="importSample" class="btn ghost">Load demo</button></div></div>
          <div style="margin-top:10px;color:var(--muted);font-size:13px">Tip: Use &quot;Load demo&quot; to see example messages. Clear all removes messages locally.</div>
        </div>
      </aside>
    </div>

    <footer>Built with ‚ù§Ô∏è ‚Äî FunBox AI (colorful, professional & modern).</footer>
  </div>

  <script type="text/javascript">
    (function(){
      const STORAGE_KEY = 'funbox_messages_ai';
      const msgEl = document.getElementById('msg');
      const senderEl = document.getElementById('sender');
      const sendBtn = document.getElementById('send');
      const aiReplyBtn = document.getElementById('aiReply');
      const messagesContainer = document.getElementById('messagesContainer');
      const totalCountEl = document.getElementById('totalCount');
      const unreadCountEl = document.getElementById('unreadCount');
      const clearAllBtn = document.getElementById('clearAll');
      const importSampleBtn = document.getElementById('importSample');

      function nowISO() { return new Date().toISOString(); }
      function uid() { return Math.random().toString(36).slice(2, 9); }

      function load() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; } catch(e) { return []; } }
      function save(list) { localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); }

      function render() {
        const list = load().slice().reverse();
        messagesContainer.innerHTML = '';
        if(list.length === 0) {
          messagesContainer.innerHTML = '<div style="color:var(--muted);padding:20px;text-align:center;">No messages yet ‚Äî be the first to drop a secret!</div>';
        }
        let unread = 0;
        list.forEach(function(item) {
          const row = document.createElement('div'); row.className='msg';
          const avatar = document.createElement('div'); avatar.className='avatar'; avatar.textContent = item.sender ? item.sender.slice(0,2).toUpperCase() : '??';
          const meta = document.createElement('div'); meta.className='meta';
          const who = document.createElement('div'); who.className='who'; who.textContent = item.sender || 'Anonymous';
          const time = document.createElement('div'); time.className='time'; time.textContent = (new Date(item.time)).toLocaleString();
          const text = document.createElement('div'); text.className='text'; text.textContent = item.text;
          meta.appendChild(who); meta.appendChild(time); meta.appendChild(text);

          const actions = document.createElement('div'); actions.className='actions';
          const readBtn = document.createElement('button'); readBtn.className='btn ghost'; readBtn.textContent = item.read ? 'Read' : 'Mark Read';
          readBtn.addEventListener('click', function() { toggleRead(item.id); });
          const delBtn = document.createElement('button'); delBtn.className='btn'; delBtn.textContent='Delete';
          delBtn.addEventListener('click', function() { deleteMsg(item.id); });
          actions.appendChild(readBtn); actions.appendChild(delBtn);

          if(!item.read) unread++;
          row.appendChild(avatar); row.appendChild(meta); row.appendChild(actions);
          messagesContainer.appendChild(row);
        });
        const all = load(); totalCountEl.textContent = all.length; unreadCountEl.textContent = unread;
      }

      function addMessage(text, sender) {
        if(!text.trim()) return alert('Please type a message.');
        const list = load();
        list.push({ id: uid(), text: text.trim(), sender: sender.trim() || '', time: nowISO(), read: false });
        save(list); msgEl.value=''; senderEl.value=''; render();
      }

      function generateAIReply() {
        const userMsg = msgEl.value.trim();
        if(!userMsg) return alert('Type a message to generate AI reply.');
        const aiPhrases = [
          'Interesting! üòé',
          'I never thought about it that way.',
          'Can you explain more?',
          'Absolutely agree! üëç',
          'Wow, that\'s surprising!',
          'AI says: Keep it up! üí°'
        ];
        const reply = aiPhrases[Math.floor(Math.random()*aiPhrases.length)];
        addMessage(reply, 'AI');
      }

      function toggleRead(id) { const list = load(); const idx = list.findIndex(function(i){ return i.id === id; }); if(idx !== -1){ list[idx].read = true; save(list); render(); } }
      function deleteMsg(id) { if(!confirm('Delete this message?')) return; const list = load().filter(function(i){ return i.id !== id; }); save(list); render(); }
      function clearAll() { if(!confirm('Clear ALL messages stored locally?')) return; localStorage.removeItem(STORAGE_KEY); render(); }
      function importSample() { const samples = [
        {id: uid(), text: 'Python is amazing! üêç', sender: 'Dev', time: nowISO(), read: false},
        {id: uid(), text: 'Try some colorful messages üåà', sender: 'Tester', time: nowISO(), read: false},
        {id: uid(), text: 'AI can respond to messages instantly!', sender: 'AI', time: nowISO(), read: false}
      ]; save(load().concat(samples)); render(); }

      sendBtn.addEventListener('click', function(){ addMessage(msgEl.value, senderEl.value); });
      aiReplyBtn.addEventListener('click', generateAIReply);
      msgEl.addEventListener('keydown', function(e){ if(e.key==='Enter'&&(e.ctrlKey||e.metaKey)) addMessage(msgEl.value, senderEl.value); });
      clearAllBtn.addEventListener('click', clearAll);
      importSampleBtn.addEventListener('click', importSample);

      render(); msgEl.focus();
    })();
  </script>
</body>
</html>
